## **向量处理机**

*向量：由一组有序，具有相同类型和位数的元素。在处理机中，能处理和识别向量指令的机器为向量处理机，主要用来处理同一种操作，数据很少相关的批量数据*

- #### **分向量流水处理机**

  > - 横向处理方式
  >
  >   > 从左向右依次读取指令循环执行，组成循环程序处理，不适用于并行
  >
  > - 纵向处理方式
  >
  >   > 按列从上往下进行（与数据无关）
  >
  > - 横纵分组
  >
  >   > 把向量分为若干组，组内按纵向方式处理
  >
  > 向量流水处理方式：横纵分组
  >
  > ---
  >
  > **向量流水处理机结构**
  >
  > 1. 存储器-存储器型结构（纵向处理）
  >
  >    > - 向量指令的源向量和目的向量都是存放在存储器中，运算的中间结果需要送回存储器
  >    > - **流水线运算部件的输入输出直接与存储器相连**
  >    >
  >    > ---
  >    >
  >    > **对存储器的带宽和通讯带宽要求高，采用多体交叉并行存储器和缓冲器技术**
  >
  > 2. 寄存器-寄存器结构（分组处理）
  >
  >    > *设置快速访问的向量寄存器，用于存放源向量，目的向量及中间结果，让运算部件的输入，输出端与向量寄存器相联*
  >
  > ---
  >
  > **提高向量处理机性能技术**
  >
  > 1. 设置多个功能部件，使其并行工作
  >
  > 2. 采用链接技术（当前一条指令的结果寄存器是后一条指令源寄存器）
  >
  >    > 无向量寄存器使用冲突
  >    >
  >    > 前一条指令向量结果与向量寄存器时钟同步
  >
  > 3. 加快条件语句
  >
  > 4. 稀疏矩阵处理

- #### **阵列处理机**

  > **阵列处理机特点**
  >
  > *与向量流水线处理机对比，阵列处理机利用资源重复提升速度，在并行处理中，偏向于同时性，使每个处理单元读同时负担各种运算，但部件利用率低，成本高*
  >
  > 
  >
  > **阵列处理机构形**
  >
  > - **分布式存储器** （互连网络上使用SIMD进行数据交换）
  >
  >   > 各处理单元PE有专门的局部存储器PEM存放数据（**只能被本处理单元直接访问**）。控制器部件中存在存放程序和数据的主存储器，所有的指令都在控制器部件中进行译码，并将可以并行执行的指令传播到每个处理单元。PE之间可以通过ICN（互连网络）进行交换数据。
  >   >
  >   >   
  >   >
  >   > **ILLIAC IV处理单元阵列结构**（第四代计算机，超大规模集成电路）
  >   >
  >   > <img src="img/image-20220904004408119.png" alt="image-20220904004408119" style="zoom:80%;" /> 
  >   >
  >   > <img src="img\image-20220904012024509.png" alt="image-20220904012024509" style="zoom:67%;" />  
  >   >
  >   > 任意一个PU单元与其相邻的单元链接，在N个处理单元中，任意两个单元的最短距离不会超过$\sqrt{N} - 1 步$
  >   >
  >   > 
  >
  > - **集中式共享存储器**
  >
  >   > 存储系统由k个存储分体组成，**通过ICN全部N个处理单元共享**，与分布式不同的是，ICN用于处理单元与存储分体之间数据交换
  >
  > 
  >
  > 
  >

- #### **计算机的互联网络** 
  
  >  SIMD：处理单元（PE）之间或存储单元相互连接
  >
  >  
  >
  >  **SIMD网络设计目标**：
  >
  >  1. 结构简单
  >  2. 降低成本
  >  3. 连接灵活
  >  4. 满足算法和应用需要
  >
  >  
  >
  >  
  >
  >  **互连网络抉择：**（网络元件，互连结构，控制方式）
  >
  >  - 操作方式：同步，异步，同步与异步组合（SIMD采用同步方式，让所有PE在一个时钟周期内完成运算）
  >  - 控制策略：集中式控制和分布式控制（SIMD采用集中式控制部件对全部PE执行集中式控制）
  >  - 交换方式：有线路交换，包交换及线路和包交换。线路交换适用于大批量数据传输；包交换不用建立实际连接通路，易于短数据传输。（SIMD采用有线路交换）
  >  - 网络拓扑结构：动态网络拓扑（由部分组件串联，需要经过多次循环后才能到达目的单元）
  >
  >  ---
  >
  >  
  >
  >  **基本的单级互连网络**
  >
  >  ​    $n = log_2N$ ，可以用n位二进制来表示N个输入端和输出端的二进制地址
  >
  >  1. **恒等函数**，同号输入输出端直连  
  >
  >  
  >
  >  2. **立方体单级网络**(交换函数)
  >
  >     > N个通信节点n = $log_2N$中互连函数，当N=8时，n=3，用于立方体互连函数
  >     >
  >     > 即： 
  >     > $$
  >     > Cube_0(x_2x_1x_0) = x_2x_1 \overline{x_0} \\
  >     > Cube_1(x_2x_1x_0) = x_2\overline{x_1} x_0 \\
  >     > Cube_2(x_2x_1x_0) = \overline{x_2}x_1 x_0
  >     > $$
  >     > ![image-20220905095343337](img\image-20220905095343337.png) 
  >     >
  >     > ---
  >     >
  >     > 单级立方体网络的最大距离为n,  即反复使用单级网络， 最多经n 次传送就可以实现任意一对入、出端间的连接. 而且任意两个结点之间至少有n条不同的路径可走，容错性强， 只是距离小于n 的两个结点之间各条路径的长度可能不等.
  >
  >  3. **移数函数PM2I**
  >
  >     > PM2I，属于移数函数，将输入短错开一定的位置（模N）后连到输出端
  >     > $$
  >     > \left\{	
  >     > \begin{array}{c}
  >     > PM2_{+i}(x) = x + 2^i \ mod \ N  \\
  >     > PM2_{-i}(x) = x - 2^i \ mod \ N
  >     > \end{array}
  >     > \right. \\
  >     > N表示处理单元输入输出端点数，x表示连接端点( 0\le x \le N-1)，
  >     > \\i表示函数下标(0\le i \le n-1)，其中 n = log_2N 表示n与N的关系\\
  >     > PM2函数为2n-1 个
  >     > $$
  >     >
  >     > ---
  >     >
  >     > <img src="img\image-20220905103754104.png" alt="image-20220905103754104" style="zoom:50%;" />  
  >
  >  4. **混铣交换**(置换函数)
  >
  >     >*将输入端分成数目相等的两半，前半和后半按均匀洗牌方式交叉相连*
  >     >$$
  >     >shuffle：o(x_{n-1},x_{n-2},...x_1,x_0) = x_{n-2}x_{n-3}....x_1x_0x_{n-1} \\ （把输入端的二进制编号循环向左移动一位）  \\
  >     >shuffle_k : o_{(k)} (x_{n-1}...x_k | x_{k-1},x_{k-2}...,x_0) = x_{n-1}...x_k | x_{x-2}...x_0x_{k-1}  \\ (输入端二进制编号中从右开始第k位向左循环一位) \\
  >     >shuffle_k : o^{(k)} (x_{n-1}...x_k | x_{k-1},x_{k-2}...,x_0) = x_{n-1}...x_k | x_{x-2}...x_0x_{k-1}  \\ (输入端二进制编号中从左开始第k位向左循环一位)
  >     >$$
  >     ><img src="img\image-20220905101837878.png" alt="image-20220905101837878" style="zoom:50%;" /> 
  >     >
  >     ><img src="img\image-20220905102320318.png" alt="image-20220905102320318" style="zoom:50%;" /> 
  >     >
  >     >
  >
  >  5. **蝶形单级**
  >
  >     >*将二进制最高位与最低位交换位置*
  >     >$$
  >     >Butterfly(P_{n-1},P_{n-2},...P_{1},P_{0}) = P_0P_{n-2}...P_1P_{n-1}
  >     >$$
  >     ><img src="img\image-20220905102930556.png" alt="image-20220905102930556" style="zoom:50%;" /> 
  >
  >  ---
  >
  >  #### **多级互连网络 （开关模块，控制方式，拓扑方式）**
  >
  >  - 交叉开关
  >
  >    > 交叉开关连接方式
  >    >
  >    > 1. 直连 （0表示直连）
  >    > 2. 交换(出入端互换) （1表示交换）
  >    > 3. 上播（$i_入 连i_出，j_出 连j_入$）
  >    > 4. 下播（$j_入 连i_出，j_出 连i_入$）
  >    >
  >    > <img src="img\image-20220905111658884.png" alt="image-20220905111658884" style="zoom:50%;" /> 
  >
  >  - 控制方式(控制各个交叉开关)
  >
  >    > 级控制（同级只用一个控制信号控制所有开关，开关只能处于一个状态）
  >    >
  >    > 单元控制（每个开关都有独立的信号控制）
  >    >
  >    > 部分级控制（第i级所有开关使用i+1个信号控制）
  >
  >  - 拓扑方式（使用单级互连网络进行拓扑）
  >
  >  
  >
  >  **多级互连网络**
  >
  >  - 多级立方体网络（STARAN）（级连接采用直连方式，控制开关采用立方体单级函数实现）
  >
  >    > - 控制信号：111 = $Cube_0+Cube_1+Cube2$    101=$Cube_0 + Cube_2$
  >    >
  >    > - 当采用移数网络为拓扑时
  >    >
  >    >   控制信号：
  >    >
  >    > ![image-20221007153512292](img\image-20221007153512292.png) 
  >
  >  - 多级混洗交换网络(采用单元控制，四功能交换单元，混洗网络拓扑)
  >
  >    > ![image-20221007153545121](img\image-20221007153545121.png)  
  >
  >  - 多级PM2I网络
  >
  >  - 基准网络
  >
  >  - 多级交叉开关网络
  >
  >  - 全排网络
  >
  
- #### **脉动阵列处理机**
  
  > 由一组处理单元PE构成的阵列，每个PE内容结构相同，脉动阵列结构简单，规整，模块化强，可扩充性好
  
  
  
  



  

  

