### 数据表示

> 数据结构：串，队列，栈，向量，阵列，链表，树，图
>
> 数据表示：**处理机硬件**能够辨认并进行存储、传送和处理的数据表示方法。
>
> **自定义数据表示**
>
> - **标志符数据表示**（数据包含类型标志）
>
>   > 1. 简化指令系统和程序设计
>   > 2. 简化编译程序
>   > 3. 实现一致性校验
>   > 4. 硬件完成对数据类型转换
>   > 5. 程序可以直接操作数据
>   > 6. 软件调试和应用开发提供支持
>   >
>   > ---
>   >
>   > 1. 增加存储空间
>   > 2. 降低指令执行速度
>
> - **数据描述符**（数组，堆栈）
>
>   > 数据描述符：描述一组数据的类型
>
> **引用数据表示原则**
>
> > 1. 系统效率是否提高
> > 2. 通用性和利用率
>
> **浮点数数据表示**
>
> > ![image-20220824223345731](img/image-20220824223345731.png) 
> >
> > ![image-20220824224721995](img/image-20220824224721995.png) 
> >
> > 浮点数据：符号位(数符)+指数位(阶码)+尾数
> > $$
> > 二进制科学计数法 \\
> > N=r^E \times (1+M) = (-1)^S \times 1.M \times r^e \\
> > 32位计算机中 e = E - 127 \\
> > 64位计算机中 e = E - 1023 \\
> > 0< M < 1 ,  \\
> > eg: 120.5 使用二进制表示为1111000.1 ，使用二进制科学计数法表示为 1.1110001 \times 2^6 \\
> > 其中M为二进制有效数字 E表示小数点右偏移位数(指数)
> > $$
> > S：符号位（表示正负）
> >
> > E：阶码(二进制科学计数法中小数点右移位数)
> >
> > M：尾数(二进制有效数字)
> >
> > r ：基数（表示进制位）
> >
> > *二进制转十进制，整数部分$\sum_{1}^{n}2^{N-1} \times B,其中B表示二进制0,1$，小数部分$\sum_{1}^{n}2^{-(N-1)} \times B$*  
> >
> > ---
> >
> > 阶值：二进制p位，尾数：$r_m$进制m位
> >
> > | 可表示最小尾数值 / 可表示最小值 | $r_m^{-1}$                       |
> > | :-----------------------------: | -------------------------------- |
> > |      **可表示最大尾数值**       | 1- $r_m^{-1}$                    |
> > |            最大阶值             | $2^p$-1                          |
> > |          可表示最大值           | $r_m^{2p-1} \times (1-r_m^{-m})$ |
> > |        可表示的尾数个数         | $r_m^m \times (r_m-1) / r_m$     |
> >
> > **尾数M，基数r取值大，会扩大浮点数的表示范围，增加可表示的个数，减少移位次数，扩大浮点数表示范围，降低精度损失提高运算速度。**
>
> **浮点数尾数下溢处理方法**(下溢：尾数表示长度不够，上溢：阶数表示长度不够)
>
> <img src="img/截屏2022-08-27%2017.35.20-1593112.png" alt="截屏2022-08-27 17.35.20" style="zoom:50%;" /> 
>
> 1. 截断法(误差最大，无法调节)
> 2. 舍入法(误差小,处理速度慢)
> 3. 恒加1法(误差大,实现简单)
> 4. 查表舍入法(误差小,速度快,需要硬件支持)

### 寻址方式

> **程序在主存中的定位**
>
> - **静态定位**
>
>   > 将程序用软件方式把程序逻辑地址转换为物理地址，程序执行过程中物理地址不在改变
>   >
>   > （不利于程序调试，出错无法定位问题，不适用于流水线，重叠技术）
>
> - **动态在定位**
>
> > 增加基指寄存器，程序逻辑地址转物理地址时判断加上起始地址转为物理地址
>
> - **虚拟地址映像表**

### 指令系统

> **指令系统设计原则**
>
> 1. 规整性(对相识的操作做相同的规定)
> 2. 对称性
> 3. 独立性和全能性
> 4. 正交(指令中不同的字段代表的含义相互独立)
> 5. 可组合性(指令系统中所有操作对各种**寻址方式,数据类型**都能适用)
> 6. 可扩充性
>
> **指令操作码优化**
>
> - 指令 = 操作码+地址码(数据地址)
> - 定长操作码(对使用频率高的操作码加权构造哈夫曼树减少操作码冗余)
> - 扩展码：定长码+扩展码（构造原则，频率高的编制为短码，频率低的使用哈夫曼树压缩优化）
>
> **指令格式优化**
>
> 1. 采用扩展操作码
> 2. 缩短地址码长度(通过基址，寄存器，段式地址转换方式缩短地址码长度)
> 3. 采用多种**地址制方式**，增强指令功能
> 4. 采用多种**寻址方式**
> 5. 采用多种不同指令长度
>
> **指令系统CISC与RISC**
>
> **CISC（复杂指令系统计算机）：** 设置更为复杂的新指令代替程序实现其功能，软件功能硬件化（面向程序，高级语言，操作系统）
>
> - 面向程序优化途径
>
>   1. 动态使用频率改进指令系统减少目标程序执行时间
>
>   2. 增强复合指令代替原先宏指令和值程序
>
> - 面向高级语言优化途径
>
>   1. 分析机器语言与高级语言语言差异，对使用频率高的语句用指令代替
>   2. 优化高级语言编译器
>   3. 发展高级语言计算机（没有编译，让高级语言通过硬件或软件汇编成机器语言执行或使用高级语言代替机器语言）
>
> - 面向操作系统的优化实现
>
> 
>
> - CISC缺点
>
>   1. 指令系统庞大，功能复杂，不利于自动设计，系统可靠性低
>   2. 指令操作复杂，执行速度低
>   3. 不利于编译器优化
>   4. 指令使用频率低
>
> **RISC（精简指令系统计算机）**：减少指令种类和简化指令功能来降低硬件设计的复杂度，提高指令的执行速度
>
> - 设计RISC基本原则
>
>   1. 选择高频指令进行优化
>   2. 减少指令系统寻址方式
>   3. 让所有指令在同一个机器周期完成
>   4. 扩大通用寄存器数，尽量减少主存访问
>   5. 大多数指令由硬件完成，少数指令使用微程序完成
>
> - RISC结构采用的基本技术
>
>   1. 逻辑实现采用硬件，或微程序完成
>
>   2. 采用重叠寄存器窗口，减少主存访问，缩短寻址时间
>
>   3. 指令用流水和延迟技术
>
>      > 流水：指令的取指和执行操作阶段时间上完全重叠（使其指令执行时间减半）
>      >
>      > 延迟：未满足执行条件的指令与其他预取指令调换执行位置（编译器优化）
>
>   4. 高速缓存存储器Cache
>
>   5. 优化编译系统
>
> - RISC优缺点
>
>   1. 简化指令系统设计
>   2. 提高计算机执行速度和效率
>   3. 降低设计成本
>   4. 加重汇编语言程序，编译程序设计
>   5. 对虚拟机和特殊计算支持有限